define("arale/templatable/0.9.0/templatable",["$","gallery/handlebars/1.0.1/handlebars"],function(e,t,l){function r(e){return p(e)?null:s(n(e))}function a(e,t){if(e){var l=e.find(t);if(0===l.length)throw Error("Invalid template selector: "+t);return i(l.html())}}function n(e){return e.replace(/({[^}]+}})/g,"<!--$1-->").replace(/\s(src|href)\s*=\s*(['"])(.*?\{.+?)\2/g," data-templatable-$1=$2$3$2")}function i(e){return e.replace(/(?:<|&lt;)!--({{[^}]+}})--(?:>|&gt;)/g,"$1").replace(/data-templatable-/gi,"")}function p(e){return"function"==typeof e}var s=e("$"),m=e("gallery/handlebars/1.0.1/handlebars"),o={};l.exports={templateHelpers:null,templateObject:null,parseElementFromTemplate:function(){var e;/^#/.test(this.template)&&(e=document.getElementById(this.template.substring(1)))&&(this.template=e.innerHTML),this.templateObject=r(this.template),this.element=s(this.compile())},compile:function(e,t){e||(e=this.template),t||(t=this.model),t.toJSON&&(t=t.toJSON());var l=this.templateHelpers;if(l)for(var r in l)l.hasOwnProperty(r)&&m.registerHelper(r,l[r]);var a=p(e)?e:o[e];a||(a=o[e]=m.compile(e));var n=a(t);if(l)for(r in l)l.hasOwnProperty(r)&&delete m.helpers[r];return n},renderPartial:function(e){var t=a(this.templateObject,e);return t?this.$(e).html(this.compile(t)):this.element.html(this.compile()),this}};var c=m.compile;m.compile=function(e){return p(e)?e:c.call(m,e)}});
